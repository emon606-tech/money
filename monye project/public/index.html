<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Random Number Generator</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 100px; }
    #number { font-size: 3rem; margin-bottom: 20px; }
    #error { color: red; }
    button { font-size: 1.2rem; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>
  <h1 id="number">Loading...</h1>
  <div id="error"></div>
  <button id="refreshBtn">Generate New Number</button>

  <script>
    const numberEl = document.getElementById('number');
    const errorEl = document.getElementById('error');
    const btn = document.getElementById('refreshBtn');

    async function fetchNumber() {
      errorEl.textContent = "";
      numberEl.textContent = "Loading...";
      try {
        const res = await fetch('/random');
        if (!res.ok) {
          const errorData = await res.json();
          throw new Error(errorData.error || 'Unknown error');
        }
        const data = await res.json();
        numberEl.textContent = `Random Number: ${data.number}`;
      } catch (err) {
        numberEl.textContent = "Failed to load number";
        errorEl.textContent = err.message;
        console.error(err);
      }
    }

    btn.addEventListener('click', fetchNumber);

    // Load on page load
    fetchNumber();
  </script>
</body>
</html>
